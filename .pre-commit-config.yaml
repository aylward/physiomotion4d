# Pre-commit configuration for PhysioMotion4D
# Simplified to use Ruff for all linting and formatting

repos:
  # Ruff - fast linter and formatter (replaces black, isort, flake8)
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.14.14
    hooks:
      # Run the linter with auto-fixes
      - id: ruff
        args: [--fix]
      # Run the formatter
      - id: ruff-format

  # Type checking with mypy
  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.19.1
    hooks:
      - id: mypy
        # With pass_filenames: false, we must provide an explicit target for mypy.
        # Otherwise mypy exits with: "Missing target module, package, files, or command."
        args: [--config-file=pyproject.toml, src]
        additional_dependencies:
          - types-setuptools
          - scipy-stubs
          - types-requests
        pass_filenames: false
        files: ^src/

  # Local tests (optional - can be disabled if too slow)
  - repo: local
    hooks:
      - id: fast-unit-tests
        name: Run Fast Unit Tests
        entry: pytest tests/ -m "not slow" -v --maxfail=3
        language: system
        pass_filenames: false
        always_run: false
        files: ^(src/physiomotion4d/|tests/)
        stages: [pre-push]
